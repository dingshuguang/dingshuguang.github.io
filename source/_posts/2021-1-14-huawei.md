---
title: 华为交换机基本操作命令
date: 2021-1-14 10:11
tags: switch
top_img: https://res.cloudinary.com/ddsg/image/upload/c_scale,w_1920/v1593394961/taylor-vick-M5tzZtFCOfs-unsplash_rpv2ax.jpg
cover: https://res.cloudinary.com/ddsg/image/upload/c_scale,w_1920/v1593394961/taylor-vick-M5tzZtFCOfs-unsplash_rpv2ax.jpg
---

华为虽然快完蛋倒闭了，但是市场上还有一些机器，记录些基础命令兴许会有用。  
### 基本操作
1. 批量建vlan，并把接口划vlan
```
sys
sysname xxxx(也可无）
vlan batch 10 20
int gi1/0/1 
批量划分: 
创建端口组
port-group 10 组名比如加入vlan 10 就创建端口组10
group-member g 0/0/1 to g 0/0/10
port link-type access
port default vlan 10
q
```
2. 划分trunk口，必须指定通过的vlan，否则不会放行。
```
sys
int gi1/0/3
port link-type trunk
port trunk allow-pass vlan 10 20
```
3. 配置管理IP
```
vlan 6
int vlanif 6 配置逻辑接口为管理接口
ip address 10.0.1.56 24 华为可以直接写24 思科锐捷要写三个255
q
```
4. 配置telnet
```
telnet server enable
user-int vty 0 4 （进入vty 0 4 ）
user privilege level 15 用户级别15级
authentication-mode aaa
quit
aaa
local-user admin password cipher admin000 (用户admin 密码admin000)
local-user admin privilege level 15
local-user admin service-type telnet
q
```
5. 配置默认路由
```
ip route-static 0.0.0.0 0.0.0.0 10.1.6.1
```
6. 查询sn号
```
display device manufacture-info
```
7. 查端口流量
```
dis counters
```
8. 查端口与IP相关信息
```
dis ip int brief
```
9. 单向端口隔离
```
[xx-gi0/0/1]进入要与其他端口隔离的端口
am isolate gigabitethernet 0/0/2 to 0/0/10
quit
undo am isolate (gi 0/0/2 to 0/0/10)不指定则代表与所有端口取消隔离 默认二层隔离，三层互通
port-isolate mode l2或all （l2二层隔离，all二层三层都隔离）
undo port-isolate mode 恢复默认模式
```
10. 端口隔离组
```
[xx-gi0/0/11]进入要加入端口隔离组的端口
port-isolate enable group 10（自动创建隔离组10)
q
undo port-isolate enable 关闭端口隔离功能
查看端口隔离组成员配置
dis port-isolate group 10或all
```
11. 查询端口up or down
```
dis int brief 
```
12. 配置DHCP
```
dhcp ena 开启服务
vlan 20 创建vlan
int vlan 20
ip add 10.0.2.1 24
dhcp select global 全局 / int 接口
q
ip pool vlan20
gateway-list 10.0.2.1
network 10.0.2.0 mask 24
dns-list 1.1.1.1 3.3.3.3
excluded-ip-address 10.0.2.254 排除自动分配的ip
q
dhcp server ping packet 3 测试3次查看要分配的IP是否被占用
dhcp server ping timeout 100 等待100ms
int g0/0/1
por link-ty acc
por def vlan 20
q
```

### 其他
> 忘记console密码  

通过STelnet/Telnet登录设备配置新的Console口登录密码

通过BootROM/BootLoad清除Console口登录密码  
对于S2720EI、S5700S-28X-LI-AC、S5700S-52X-LI-AC、S5710-X-LI、S5720EI、S5720HI、S5720I-SI、S5720LI、S5720S-LI、S5720S-SI、S5720SI、S5730HI、S5730S-EI、S5730SI、S6720EI、S6720HI、S6720LI、S6720S-EI、S6720S-LI、S6720S-SI和S6720SI，是通过BootLoad清除Console口登录密码；对于其他款型的设备，是通过BootROM清除Console口登录密码。

设备的BootROM/BootLoad提供了清除Console口登录密码的功能，用户可以在设备启动后修改Console口登录密码，然后保存配置。请按照如下步骤进行配置。  

`(1)` 通过Console口连接设备，并重启设备。当界面出现以下打印信息时，及时按下快捷键“Ctrl+B”并输入BootROM/BootLoad密码，进入BootROM/BootLoad主菜单。bootrom密码默认admin@huawei.com Admin@huawei.com
`(2)` 在BootROM/BootLoad主菜单下选择“Clear password for console user”，清除Console口登录密码。
`(3)` 根据设备的提示，在BootROM/BootLoad主菜单下选择“Boot with default mode”，启动设备。
`(4)` 完成系统启动后，通过Console口登录时不需要认证，登录后按照系统提示配置验证密码。（V200R009及之后版本，完成系统启动后，通过Console口登录时认证方式为None,系统启动后不会提示配置验证密码。）
