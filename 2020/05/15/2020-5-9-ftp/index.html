<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        DSG&#39;blog
    </title>
    
<link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            本地搭建FTP服务
        </p>
        <hr>
    </div>
    <div class="post-content">
        <p>手机和电脑经常会有数据传输,总在拿数据线一遍又一遍的插拔吗？麻烦.那用蓝牙吗？慢,还得配对.于是我想在家可以用网络在笔记本和手机之间传输，苹果电脑和苹果手机有隔空投送的功能,但只限苹果的设备.隔空投送它利用的也是本地的WiFi环境,不走Internet,这保证了网络质量 FTP服务类似,它的快慢取决于你的路由器的带宽和网卡的带宽,跟Internet的带宽没有关系.即使网断了也可以用 因为是本地的服务。</p>
<h3 id="win10-系统下开启ftp服务"><a href="#win10-系统下开启ftp服务" class="headerlink" title="win10 系统下开启ftp服务"></a>win10 系统下开启ftp服务</h3><p>控制面板–程序–启用和关闭Windows功能–Internet infomation services–FTP服务器和IIS管理控制台–确定<br>在开始菜单找到IIS(Internet infomation services) –右键左侧网站–添加FTP站点–物理名称选择要共享的文件夹–IP地址填上自己电脑的ip(这里要把自己的IP固定) –自动启用ftp站点 ssl选无 –身份选匿名和基本–授权所有用户–权限读取和写入 就完成了</p>
<h3 id="测试ftp服务"><a href="#测试ftp服务" class="headerlink" title="测试ftp服务"></a>测试ftp服务</h3><p>电脑本机打开浏览器，输入<a href="ftp://192.168.0.2(ip为自己设置的地址)">ftp://192.168.0.2(ip为自己设置的地址)</a> 一般情况就可以链接上了 如果链接不上 试试防火墙的放通应用程序 把ftp服务器放行  如果还不行 直接把专用网络的防火墙关闭 用完了 再开。 试试速度 上传和下载是非常快的 如果你的路由和电脑都是千兆的 速度可达每秒100M左右</p>
<h3 id="Ubuntu-系统下开启FTP服务"><a href="#Ubuntu-系统下开启FTP服务" class="headerlink" title="Ubuntu 系统下开启FTP服务"></a>Ubuntu 系统下开启FTP服务</h3><p>新的Ubuntu系统应该都没有预先安装ftp 需要下载安装</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install vsftpd</span><br></pre></td></tr></table></figure>
<p>安装好后 建立一个共享目录，这里新建一个ftp文件夹。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d@d:<span class="regexp">/home/</span>d$ mkdir ftp</span><br></pre></td></tr></table></figure>
<p>配置ftp文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/vsftpd.conf</span><br></pre></td></tr></table></figure>
<p>如果提示没有找到vim命令，再安装一下vim<br>在配置文件下添加如下两行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">local_root=<span class="regexp">/home/</span>d/ftp</span><br><span class="line">allow_writeable_chroot=YES</span><br></pre></td></tr></table></figure>
<blockquote>
<p>*”d” 是用户的文件目录 ftp为刚才新建的目录 用来共享ftp*</p>
</blockquote>
<p>再将#chroot_local_user=YES 的#号去掉 使其生效<br>其他默认 保存退出<br><br>所有开启的项目有</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">listen=NO</span><br><span class="line">listen_ipv6=YES</span><br><span class="line">anonymous_enable=NO</span><br><span class="line">local_enable=YES</span><br><span class="line">write_enable=YES</span><br><span class="line">local_umask=<span class="number">022</span></span><br><span class="line">dirmessage_enable=YES</span><br><span class="line">use_localtime=YES</span><br><span class="line">xferlog_enable=YES</span><br><span class="line">connect_from_port_20=YES</span><br><span class="line">chroot_local_user=YES</span><br><span class="line">secure_chroot_dir=<span class="regexp">/var/</span>run/vsftpd/empty</span><br><span class="line">pam_service_name=vsftpd</span><br><span class="line">rsa_cert_file=<span class="regexp">/etc/</span>ssl/certs/ssl-cert-snakeoil.pem</span><br><span class="line">rsa_private_key_file=<span class="regexp">/etc/</span>ssl/private/ssl-cert-snakeoil.key</span><br><span class="line">ssl_enable=NO</span><br><span class="line">local_root=<span class="regexp">/home/</span>d/ftp</span><br><span class="line">allow_writeable_chroot=YES</span><br></pre></td></tr></table></figure>
<p>重启ftp服务</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart vsftpd</span><br></pre></td></tr></table></figure>
<h3 id="测试ftp服务-1"><a href="#测试ftp服务-1" class="headerlink" title="测试ftp服务"></a>测试ftp服务</h3><p>打开浏览器 和win10 输入地址，看看能不能连上，上传下载是否正常，如果无法上传下载看看配置文件的配置是否正确，如果还是不行修改下文件夹权限为777</p>
<p>Linux系统配置上稍复杂一些，但原理都是一样的。</p>

    </div>

    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020 <a class="flink" href="https://hexo.io" target="_blank" rel="noopener">Hexo</a>-<a class="flink" href="https://github.com/" target="_blank" rel="noopener">GitHub</a>.
        
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="CmCti21ooOOIzFOhEyFkFvR0-gzGzoHsz">
<input type="hidden" id="valine_appKey" value="FqiyUqbg7McKN2eG0MCewupf">

<script src="/libs/jquery.min.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>

<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>

<script src="/js/js.js"></script>

<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>

</body>

</html>